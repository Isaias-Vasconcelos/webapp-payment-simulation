@model CheckoutModel

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="utf-8" />
    <title>Finalizar Compra</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="~/css/checkout.css" asp-append-version="true" />
</head>
<body>

    <div class="checkout-container">
        <div class="checkout-header">
            <h1>Finalizar Compra</h1>
        </div>

        @if (Model.Product != null)
        {
            <div class="product-box">
                <p><strong>Produto:</strong> @Model.Product.Name</p>
                <p><strong>Valor:</strong> R$ @Model.Product.Price.ToString("N2")</p>
            </div>
        }

        <form id="sendPayment">
            <input type="hidden" name="Product.Id" id="ProductId" value="@Model.Product?.Id" />

            <div class="form-group">
                <label for="CardNumber">Número do Cartão</label>
                <input type="text" id="CardNumber" maxlength="19" required />
            </div>

            <div class="form-group">
                <label for="CardName">Nome no Cartão</label>
                <input type="text" id="CardName" required />
            </div>

            <div class="form-group">
                <label for="CardExpiry">Validade (MM/AA)</label>
                <input type="text" id="CardExpiry" maxlength="5" required />
            </div>

            <div class="form-group">
                <label for="CardCvv">CVV</label>
                <input type="text" id="CardCvv" maxlength="4" required />
            </div>

            <div class="form-actions">
                <button type="submit" class="btn-submit">Pagar Agora</button>
            </div>
        </form>

        <dialog id="modalLoading">
            <div id="modalContent">
                <div class="spinner" id="spinner"></div>
                <div class="status-icon" id="statusIcon" style="display:none;"></div>
                <p id="modalMessage">Processando pagamento...</p>
            </div>
        </dialog>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/7.0.7/signalr.min.js"></script>
    <script src="~/js/checkout.js" asp-append-version="true"></script>
</body>
</html>
